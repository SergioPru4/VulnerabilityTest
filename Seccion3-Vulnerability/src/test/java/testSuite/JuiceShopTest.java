package testSuite;

import org.junit.jupiter.api.*;
import pages.LoginSection;
import pages.MainPage;
import pages.MenuSection;
import session.Session;

public class JuiceShopTest {
    @BeforeEach
    public void openBrowser(){
        Session.getSession().getBrowser().get("http://demo.owasp-juice.shop/#/login");
    }

    @AfterEach
    public void closeBrowser(){
        Session.getSession().getBrowser().quit();
    }

    @Test
    @Order(1)
    public void verifyLoginSuccessfully() throws InterruptedException {

        // Verify in Main Page
        MainPage mainPage = new MainPage();
        mainPage.alertMessage.click();

        Thread.sleep(3000);
        // Llena el formulario del login
        LoginSection loginSection = new LoginSection();
        loginSection.emailTextBox.sendKeys("sergioprudencio@gmail.com");
        loginSection.passwordTextBox.sendKeys("12345");
        loginSection.loginButton.click();

        MenuSection menuSection = new MenuSection();
        //Verificar que se encuentre en la navbar el "Your Basket
        Assertions.assertTrue(menuSection.cart.isDisplayed(),
                "ERROR: Could not login successfully");
        Thread.sleep(5000);
    }
}
